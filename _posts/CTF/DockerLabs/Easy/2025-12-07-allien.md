---
title: "DockerLabs: Allien"
date: 2025-12-07
categories: [CTFs, Dockerlabs]
tags: [DockerLabs, Dockerlabs Easy]
---

Machine by [Luisillo_o](https://www.youtube.com/@Luisillo_o)

---

### 1. nmap scan

Enumerate the machine and get all the important information.

By using the next command

`nmap -p- -sV VICTIM_IP`

The results reveal services for SSH, a web server, and SMB. None of these services appear vulnerable based on their versions:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_01.png)

<br>

### 2. Webserver analysis

Visiting the web server presents a PHP login page. Inspection of the source code reveals no hidden information, and the login form is not vulnerable to SQL injection:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_02.png)

We proceed by scanning the web server using gobuster, appending the `-x php` flag to include PHP files in the search:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_03.png)

The scan uncovers "products" and "info" pages, but neither provides useful information.

### 3. SMB enumeration and access

Next, we analyze the SMB service with `smbclient` to list available shares:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_04.png)


<br>

### 4. Accessing SMB Shares

Trying to access the first share with no login proves successful:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_05.png)

The first share reveals a file named `access.txt`:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_06.png)

There is a JWT (json web token):

![](/assets/img/ctf/dockerlabs/easy/allien/allien_07.png)

<br>

### 5. JWT Analysis

Using [jwt.io](https://jwt.io), we extract some information, such as the username `satriani7`. However, there isn’t much else of value:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_08.png)

<br>

### 6. User Enumeration

To continue, we use `enum4linux` to enumerate users. This confirms the presence of the user `satriani7`:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_09.png)

<br>

### 7. SMB Brute-Force

Knowing the user satriani7 has been found on both enumerations, let's try to use a bruteforce attack of the smb share with the user and the rockyou wordlist:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_10.png)

The attack successfully identifies the password `50cent`:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_11.png)

Logging in with smblclient with satriani7 user, the password we've found into the share `backup24`:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_12.png)

With the commands `recurse ON`, `prompt OFF` and `mget *` we can download all the folders and keep the structure for easier exploration:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_13.png)

In the `Documents/Personal` folder we can find a credentials file:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_14.png)

<br>

### 8. SSH Access

When we were doing the enum4linux enumeration we found the user `administrador`, so let's try to login with this user and password to ssh:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_15.png)

<br>

### 9. Privilege Escalation

With access established, we transfer linpeas to the target machine using a Python HTTP server `python3 -m http.server`:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_16.png)

Then download it on the machine, change it's permissions and execute it:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_17.png)

The scan reveals that the user `administrador` has write permissions on the web server’s html directory:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_18.png)

<br>

### 10. Reverse shell setup

We create a reverse shell using Kali’s `php-reverse-shell.php` script:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_19.png)

After modifying the script to use our attacker machine’s IP address:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_20.png)

Set up a listener with ncat `ncat -lvvp 1234`:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_21.png)

And execute it with our browser by visiting `http://Victim_IP/reverse.php`:

![](/assets/img/ctf/dockerlabs/easy/allien/allien_22.png)

Executing the reverse shell by visiting http://Victim_IP/reverse.php grants us a shell as the www-data user

<br>

### 11. Privilege Escalation

Using sudo -l, we discover that the service command can be run as root without a password. Following [GTFOBins](https://gtfobins.github.io/gtfobins/service/), we escalate privileges by executing:

`sudo service ../../bin/bash`

This grants us root access

![](/assets/img/ctf/dockerlabs/easy/allien/allien_23.png)